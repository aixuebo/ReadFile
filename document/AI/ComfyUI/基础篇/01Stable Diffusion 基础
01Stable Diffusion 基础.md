# 背景与总结
## 1.AI工具与传统软件区别，就算你拿着跟人一模一样的参数，也不一定能得到一样的结果。

# 一、Stable Diffusion原理：它是一个由几个组件（模型）构成的系统，而非单独的一个模型。
举例:当我们输入一句 prompt 后，比如“Cat, standing on the castle”，Stable Diffusion 会生成一张猫猫站在城堡的图。

## 1.Text Encoder（文本编译器），将文本转化为机器能识别的多组数字。即 文本转向量。
prompt --> 经过Text Encoder（文本编译器）--> 词特征向量
矩阵为:(77,768),一般会输出 77 个等长的向量，每个向量包含 768 个维度。

## 2.Image Information Creator ---> 这个过程可以循环N次，对N次的结果进行统一的Image Decoder。
词特征向量 + 随机图(电子雪花图或者充满信息噪声的图) 作为输入 --> Image Information Creator --> 输出 Latent Space（潜空间），
其实Latent Space就是算法中的降噪后的降维空间。低维空间包含了更重要的特征和结构。
根据向量特征对随机图降噪，产生中间产物。

你可以简单理解，此时的「中间产物」是人类看不懂的「图」，是一堆数字，但此时这个中间产物所呈现的信息已经是是一只站在城堡上的猫了。

## 3.Image Decoder（图片解码器）
输入 Latent Space --> Image Decoder --> 解码成真正的图片。

## 4.总结
与其说 AI 是在「生成」图片，不如称其为「雕刻」更合适。就像米开朗基罗在完成大卫雕像后，说过的一句话那样：雕像本来就在石头里，我只是把不要的部分去掉。

所有图片都存在了一张充满噪点的图片里，AI 只是把不要的部分去掉了。
所以如果你用同样是 Diffusion Model 搭建的 Midjourney 话，你会看到如下的过程，首先是一张模糊甚至黑色的图片，然后图片会一步步变得越来越清晰，这就是我前面所说的「降噪」或者「雕刻」的过程。

# 二、Text Encoder
TODO

# 三、Image Information Creator 降噪的过程
TODO


# 四、Image Decoder --- VAE过程，也叫 VAE Decoder，即编码降维 --> 解码升维的过程。
## 1.就是将降维的低维矩阵 还原成 高维矩阵的过程。
而这个 Encoder 加 Decoder 的组件，也被称为 Variational Auto Encoder（变分自编码器）简称 VAE 。
所以这个 Image Decoder 在一些产品里，也叫 VAE Decoder。


## 2.VAE的好处与坏处
① 好处
* 效率提示，降维后，维度小，民用的GPU也可以完成运算；训练和生产时间更短。
* 降维后，保存了更有效的图像特征信息。进而进行操作和插值，可以对图像进行更精细的控制和编辑。这使得在生成图像时可以更好地控制图像的细节和风格，从而提高生成图像的质量和逼真度。

② 坏处
* 还原后会丢失数据。图片有时候比较奇怪。

## 3.为什么有时候文生图的内容会很怪异
* 一些文字的细节特征丢失了。
* 降噪降维的时候，文字的预测与图像的预测相比，不那么连贯。
举个例子，预测猫的特征是相对简单的，因为猫大概率有 2 个眼睛，眼睛下面是鼻子，它是连贯的。
比如 站在城堡的猫，猫和城堡还有站着的动作，可能中间因为语言细节没有交代清晰，造成作画色彩度、平滑度不连贯。
