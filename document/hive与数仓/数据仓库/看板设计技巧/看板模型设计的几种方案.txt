一、背景与总结

二、明细数据一次性创建
命名可以是topic_业务线_detail_维度组合
1.维度主题明细表，维度尽可能稳定不变，比如使用商家ID做主键。
比如商家明细表，有一些指标是count(distinct)方式计算，因此只能存储明细，而且一个商家有多条数据那种明细。比如商家交易用户数，存储的是商家id、交易用户id。
2.缺点是该表会很大，因为是union all的方式，把所有数据都组成一个大宽表里。
3.优点是所有数据都在一起，方便运维。
4.注意:
根据需求的不同，明细数据粒度会不同，所以在底层应该有各种维度数据union all组合后的明细数据。


三、根据业务需求，创建维度聚合表
命名可以是topic_业务线_combine_维度组合_(cube)
命名可以是topic_业务线_merge_维度组合_(cube)
1.目标
基于维度主题明细表 + 维度表，扩展维度，所有维度参与group by，指标参与聚合，因此可以获取sum、count、count(distinct)指标结果。
2.场景，如果用户需要筛选器随意筛选维度组合，则需要cube，或者基于明细表实时查询
a.非cube场景，定制开发，需要哪些维度组合看数据，是固定的。适用于sql临时查询。
b.cube，把用户需要的各种维度组合都计算好，用于看板搭建。缺点计算量大，有数据冗余。
c.doris，count(distinct)使用bitmap形式存储，都可以用于计算。即存储明细数据即可。是否可以让hive支持bitmap有待思考。
