一、RFM模型电商三大特点
购买频率、客单价、最近一次购买时间
因为电商卖出货物后,退回的少,所以不考虑,但是我们这边有赎回,因此要考虑

因此我们这边的模型是
每个用户的平均存量价、投资频率、赎回频率、最近投资时间

我们的模型前提是发生过投资行为的用户,而不是注册用户

二、如何计算以上四个指标,即每一个用户都计算这四个指标
1.用户平均每天存量价,即60日内平均投资金额,单位 元
说明 最近60天内,用户平均在投金 额
例子
比如第一天用户存量是1万,第二天用户赎回5000,存量是5000,第三天用户存入1万,存量是15000,第四天用户全赎回,存量是0,第五天用户存入2万.存量是2万
则平均存量是(1万+5千+15000+0+20000+...+第60天存量)/60
特别:
如果用户首次投资到现在没有60天,则分母不是60,而是具体投资天数
 

2.60日内购买周期 或者赎回周期 单位 天/次
即投资频率和赎回频率相同,计算最近60天的投资、赎回频率
说明
最近60天内，用户平均多少天购买一次

例子
假设一个用户最近60天投资3次,则60/3 = 20,即平均该用户20天投资一次
即该公式是 60/该用户投资次数

特别:
a.如果该用户首次投资到现在没有60天,则公式分子就不是60,而是具体天数,分母不变
b.如果该用户在前70天发生过首次投资一次,但是后来一直没有投资过,因此最近60天其实用户是没有投资过的,因此就是60/0,因此是不能被除的,因此此时规定这种用户为空


注意:未来算法可能会有改动
因为现在是按天算投资,即用户每天投资多少次
因为支付渠道有限额的问题,所以用户会一天投资多次,因此频率就会很多,导致数据会有影响,数据不准,因为用户没有真的投资那么多次,未来可能会有调整
调成成60天/用户投资天数,而不是60天/用户投资次数,即一个用户一天投资多次,但是结果就算投资1天

3.最近投资时间  单位是 天,即最近投资到现在有多少天了
说明:
用户最近一次投资时间距离现在的天数

这个指标不受60天控制,因此我们的目标群都是发生过首次投资的用户,因此该值一定是存在的

三、计算我们公司每一个指标的分类,每一个指标都分成5类
经过2,已经知道每一个用户的四个指标了,那么我们要设定此时我们的用户群对应的分类
每一个指标都设置成5个分类,使用聚类算法,获取两个分类之间的位置作为分界线,得到每一个指标的5个分类
比如用户平均每天存量价指标分类如下
class1 [0,2千]  
class2 (2000,7000]
class3 (7000,4w]
class4 (4w,18w]
class5 (18w,无穷]

四、计算四维模型
经过三的计算,我们得到了标准的四维指标
因为每一个维度都有5类,因此一共有多少个空格呢,一共有5*5*5*5=625个格子
陈总把格子划分成二维平面了,但是抛开平面来说,我们应该可以想一下,这个就是一个四维空间

五、如何把所有用户分成整个5级
因为我们把用户的每一个指标分成了5级,但是我们目标是想把用户真的分成5级,但是有四个指标,如何归一化呢
方案1,我们可以为每一个指标设置权重,让用户的每一个指标得分*该指标的权重之和作为一个该用户最终的值
我们对该每一个用户最终的值进行聚类,分成5类,这样就可以知道下一个用户来了,我们计算各个指标,就知道该用户属于哪个分类了
但是难点在于,权重如何设置,这部分有些难度,暂时不考虑用该方法,这部分应该用线性回归,对四个指标进行拟合

方案2
我们可以想像四维空间的625个点,因为对我们来说,最重要的指标就是存量了，因为我们靠存留赚利差的公司,用户存量越大.对我们的意义会更大。
因此每一个格子应该代表一个值,因此四维空间中一共有625个值。
每一个格子的值是什么呢?该格子的值是平均存量,即每一个格子就是所有属于该格子的用户在当时的全部存量/格子人数
比如某一个格子存储的人就是用户每天存量为 [0,2千]、最近[0,7]天依然投资、每天投资[0,11]次,从不赎回的格子中有多少人,这些人一共有多少存量

因为每一个格子对应的是一个用户的四个属性值,因此一定是一个用户一定在一个格子内存在,不可能一个用户分布到多个格子内。

因为此时每一个格子都有自己的存量均值了,我们可以对625个数再进行聚类,分成5类,
或者使用第一个指标,因为该指标分类的结果也是存量人均均值,因此也可以使用该指标,
因此总之到此位置,我们知道关于存量的五类范围,然后对625个格子的每一个值进行热力图标注,属于该分类范畴的用不同颜色标准,结果就是最终分类



六、离场用户
因为离场用户一定属于第一分类中的一种,因为他肯定很久没有投资过了,也都赎回了,也没有存量了,因此多半是在第一分类中
而很多时候我们是不应该考虑离场用户的,因此应该最终分组不是5类,而是6类,多了一类离场用户
而离场用户在第一分类的格子里面,应该是有若干个格子,每一个格子既有离场用户,又有真的第一分类的用户在里面,而格子的值,应该是非离场用户的存量/非离场用户人


七、当我们可以为每一个用户头分配一个组后,我们就可以基于组进行统计组内的信息
日报也是根据组去出的,这样可以预测用户是否离场之类的




pdf的问题
一.2.1分级 b用户分级的含义是说这部分为什么颜色有变化,为什么颜色没统一
这得拿到属于这部分的用户信息,看看具体原因
二、第一页,有一个总结,这属于用户画像范畴,参见用户画像的总结
三、2.2稳定性
因为我们为每一个用户分配了综合分类,但是该用户虽然属于该综合分类,但是他可能自己的每一个指标的分类不再属于该综合分类的范围内
比如,用户综合分类属于二级,该级别属于(2000,7000]存量,因此看如果该用户存量其实不再这里面,他虽然属于这个级别,是因为这个用户四个指标平均分类属于二级.但是该用户在存量却超过二级,或者少于二级,这个是可能的。
比如图上显示,5级应该是存量大于18万,因此发现有些用户钱不多,但是该属于综合5分类,说明这些用户要预警了,可能是处于流失中,或者做一些活动把用户召唤回来,或者我们的算法模型有问题导致的分布不均匀。
四、6页 2.1发现分类后好像不同分类数量格子都差不多,难道是说明不同分类的人数量也相似么?
答案肯定不是的
空间相同，但是人密度大,一级的用户多,因此每一个格子可能有更多的人,但是每一个级别持有的格子的总数,其实差距不会特别大
五、16页 3. 2 资产端分析
是说历史上最高用户是5级的充值成本+提现成本 ,即投资多少比,提现多少比,我们公司是有成本的,计算总成本
利差是我们公司赚的利息差,即用户投资在我们公司的钱,我们能赚取多少利息差,通过这个比较,可以知道公司是否赚到钱了
六、18页  3. 2 降级对比
判断60天内用户最高等级是5级的用户,在当前等级是多少级,以及多少人发生了降级,如果没降级的,则不进行显示


七、20页  响应用户30日内资金留存率分析 
什么是留存率
因为当时做活动,投资多少钱,返回给用户多少钱的体验金,用户可以获取双倍利息
这样就想知道用户把这笔钱投资过来后,留存了多久
比如用户投资10万,我们赠送10万体验金,这样用户第一天取1万,第二天取1万,则还剩8万,留存率就是8万/10万

八、25-30 用户转化 ——8月注册且投资用户在9月的转化过程
即计算每一个等级的用户在8月份刚刚注册且投资的用户拿过来做对比
如果注册当天是什么级别,就作为什么级别。
看用户连续30天的行为,如果用户是8月10号注册的,因此要跟踪用户到9月10号结束
跟踪该等级在当月有多少人,一个月后有多少人分布在不同等级上。


九、32页,关于决策树分析流失原因
如果用户降级了，说明就有可能流失,因为用户明明有很高的钱,为什么不投资了呢,而降级了,说明用户可能会流失,不要等着真流失了再操作,我们应该先抓住快流失的用户给与补偿

此时所谓流失,不是真的流失,而是指代用户降级行为发生的,就叫做流失了

决策树分析指标:这些指标用于判断哪些是重要的评估标准
包含:
1.我们需要的四个指标,因为每一个都是5个分类,因此后面标准是5
2.大额赎回等级,4个等级,也需要聚类
  判断流失2天内未赎回、2天内赎回金额小于5万,等等
3.用户周期
所谓周期,是指代用户把账户的钱都赎回空了就算一次周期,到不一定是一分钱都没有了,50以内就算赎回空了
此时分配了13个级别,因为综合历史全部数据,发现最多用户周期是13
4.注册到首投的时间间隔
用于表示用户注册时间和首投时间的时间间隔,表示用户对品牌的忠诚度,忠诚度越高,自然越注册后就投资了
此时分配了148个等级,也是因为历史数据来看,最多时间间隔就是148
5.生命时长
就是当前时间-首投时间,用于表示该用户体验该产品一共多久了

6.变异系数
描述用户投资习惯
判断用户投资或者赎回是否波动很大,如果波动很大,有可能用户就这种投资习惯,喜欢大额进去,全部出来,再进去
使用std/mean计算,std表示存量标准差  mean表示该用户历史上每一天的单价与平均值的差 之和


7.邀请 2个分类,分别表示是否该用户有过邀请行为
8.年龄 一共80个分类
9.性别,一共2个分类
10.城市  一共4个分类,因为有时候决策树算法只能针对分类,因此要把城市转换成分类

决策树
设置一些列指标,决策树算法很多都是要求指标都是连续数据或者分类数据
决策树算法会帮我们判断哪些指标是最关键的指标

决策树停止条件
1.最终选择出来的人数占总人数比例少于x%就停止
2.最终选择出来的人数少于x个就停止




