一、背景与总结


二、内存基础知识
1.物理内存，也称为主存，比如常说的内存8G。
2.只有内核才能直接访问物理内存。进程访问内存时，怎么办？
3.内存映射
linux内核为每一个进程，分配了一个独立的虚拟地址空间，而且这个地址空间是连续的。
进程访问的是虚拟内存空间。
4.虚拟内存空间内部结构。
内核空间+用户空间。
32位系统的内核空间占用 1G，位于最高处，剩下的3G是用户空间。
64位系统的内核空间和用户空间都是 128T，分别占据整个内存空间的最高和最低处，剩下的中间部分是未定义的。
5.内存映射，内核维护了一个页表，记录了虚拟地址与物理地址的映射。
进程在用户态时，只能访问用户空间内存；
只有进入内核态后，才可以访问内核空间内存。
如果进程需要使用内存，就会分配物理内存，这样进程进入内核态后，就可以使用对应的物理内存了。

